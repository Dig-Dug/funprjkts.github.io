<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>unsplash</title>
  <link rel="shortcut icon" type="image/png" href="cam.png" />
  <LINK href="style.css" rel="stylesheet" type="text/css">
  <!--  <script src="unsplash.js"></script>  -->



</head>

<body>

  <div class="topGrid">
    <div><img src="cam.png" style="width: 51px;"></div>
    <div>
      <h2>Unsplash. Search photos by keyword</h2>
    </div>
    <div>
      <!--  <form class="example" onclick="fotch()"> -->
      <input id="in"class="in" type="text" placeholder="Search.." name="search">
      <button type="submit" class="sorch"onclick="fotch()" >TODO</button>
      <!--   </form> -->
    </div>
  </div>



  <div>
    <button id="back" onclick="document.location='../index.html'">back</button>

  </div>
  <div id="showIt"class="showIt"></div>
  <!-- https://fetch.spec.whatwg.org/#terminology-headers -->
  <script>
/*     const api_url = 'https://api.wheretheiss.at/v1/satellites/25544/tles';
    async function fotch() {
  const response = await fetch(api_url);
  const data = await response.json();
  console.log(data.line1)
  } */
  async function fotch() {
    
    //const url = 'https://m.media-amazon.com/images/I/71kWWI7fM7L._AC_SY355_.jpg'
    
   // let input = document.getElementById('in');
    let input =  document.getElementsByClassName("in")[0].value;
    const url = 'https://api.unsplash.com/search/photos?query='+input+'&per_page=30&client_id=SouHY7Uul-OxoMl3LL3c0NkxUtjIrKwf3tsGk1JaiVo';
    //const url = 'https://lastfm.freetls.fastly.net/i/u/ar0/0d4b447677cb4babb302ffbe9a9b642a';
   
    // console.log( input, url)

  /*   const options = {
        method: "GET"
    }

    let response = await fetch(url, options)

    if (response.status === 200) {
        const imageBlob = await response.blob();
        const imageObjectURL = URL.createObjectURL(imageBlob);

        const image = document.createElement('img')
        image.src = imageObjectURL

        const container = document.getElementById("back")
        container.append(image)
    }
    else {
        console.log("HTTP-Error: " + response.status)
    } */

  


  const response = await fetch(url, 
  )
  const imageBlob = await response.blob()
 const reader = new FileReader();
 reader.readAsDataURL(imageBlob);
  reader.onloadend = () => {
 //  const base64data = reader.result;
  //console.log(base64data);
  
  //let input = document.getElementById('in');
  const image = document.createElement('img')
    // image.src = 'https://api.unsplash.com/search/photos?query='+input.value+'&per_page=30&client_id=SouHY7Uul-OxoMl3LL3c0NkxUtjIrKwf3tsGk1JaiVo';
   image.src = url;
    image.setAttribute("class", "imhh");
   
      document.getElementById("showIt").appendChild(image);
        console.log(input)
        //const container = document.getElementById("back")
      // container.append(image)  
  
  
  }  //rat


  }

  </script>

</body>

</html>